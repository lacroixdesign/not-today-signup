@mixin input-status-icon {
  padding-right: 1.75em;
  background-size: 16px 16px;
  background-repeat: no-repeat;
  background-position: 98% 50%;
  background-position: -webkit-calc(100%-0.5em) 50%;
  background-position: -moz-calc(100%-0.5em) 50%;
  background-position: calc(100% - 0.5em) 50%;
}

@mixin input($bg: white, $color: #555, $border: #ccc, $border-width: 1px) {
  @include appearance(none);
  display: inline-block;
  width: 100%;
  padding: 0.6em 0.75em;
  margin-bottom: 0;
  border: none;
  @if $border != none {
    border: $border-width solid $border;
  }
  border-radius: 3px;
  box-shadow: none;
  background: $bg;
  color: $color;
  font-family: $typeface-sans;
  font-size: 1em;
  line-height: 1.25;

  &.thin {
    border-width: 1px;
  }

  &.large {
    font-size: 1.25em;
  }
  // input.ng-invalid {
  //   border: 1px solid red;
  // }

  &.ng-invalid.ng-dirty {
    @include input-status-icon;
    border-color: lighten($red, 15);
    // background-color: lighten($red, 39);
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFOEVGNzg2QTE1OTUxMUUzOTc0Njk1NzlBNzE0NTRFNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFOEVGNzg2QjE1OTUxMUUzOTc0Njk1NzlBNzE0NTRFNSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgxRTYyOEZGMTU5MjExRTM5NzQ2OTU3OUE3MTQ1NEU1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgxRTYyOTAwMTU5MjExRTM5NzQ2OTU3OUE3MTQ1NEU1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+R+Sx0QAAAThJREFUeNp8k79LA0EQhS+H2gg2gpWtaUTwR5VEgkKikIBoJdoI6p9jaS8IQhqtBMUQoyhGsLERtBALsbJJZRQE/QZmYRnm8uA72Ll9b2fvdnPd/b1EdQQncJz01zJswaYMBiCnpjUtFqGTYZ6BU/WNwkrK41zNQXdQcsyzcK9m0RK0JKDhTL41IXPwAENm3qGkHcAbtJ2QCfjWLaXmvXTQDMUrqDidPMITDJp6TcyJSW3Bopk4DCPOymdhYNuSTvLw4XTzCZNh5awAUQ/+nLrUfm3RBhTgHcadgDF4sduMA0p6BmL9aEexLqFqAwr626ymYcrZ0kXoRAI2nJVFC/AMrzDvvJdOtiVgJ8N8bY530elkVwLq8X9FZWMO6mhIfG4qqX6omt7Idbjpc5XlMq3qXDm5X/8CDABk0z9fBdYUdQAAAABJRU5ErkJggg==);
    color: lighten($red, 15);

    @include hidpi {
      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFOEVGNzg2RTE1OTUxMUUzOTc0Njk1NzlBNzE0NTRFNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFOEVGNzg2RjE1OTUxMUUzOTc0Njk1NzlBNzE0NTRFNSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU4RUY3ODZDMTU5NTExRTM5NzQ2OTU3OUE3MTQ1NEU1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU4RUY3ODZEMTU5NTExRTM5NzQ2OTU3OUE3MTQ1NEU1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+WVycCAAAAplJREFUeNqsl89rE0EUx+Mm3mwq1t4sRqm1xYNWTWujhaIg2JPXXkXwIHj25F/g0YOgePOieFRsKRSsJFYt/YGN+AOktg2KtdhIk4r44zvwHRiG3Z03m33wIcnuzHvfee/N7GbHj1s3M5btBzfANbCVSc/ugLtgxrwYWIN2g2lwiZ+5lII/AZfBBOiKEtAOysaAfvAcZFMIfoHf82AWFGwBe8Ac6LMmDzJlOxMGHzeCa+sEC6BbCzgCXoMDEU5OJBShgp+PuJdnzCEl4HZM8IxRjoqHiMcxwc2S31MCroD3Aqc6E66emAKjAn81MKYEVEERfBRM6neUQ6V9RODnK2PO6yasg5MUI83ELo+am7ZMHzV7G26CU8JyqEy8Mn4/Ewb/zOBr+oJ90PxkapTzHoezXjDJ7A0La6629XfzYthJV6eIl+Cww+k54a5QKx4AX+wbQcSEOtNczbRuy/RVC7sZxExsevSEq+bfogYEDge6JxYTBP8UVnNfAbocR8FTj+AvwMGwmicRoG3bY+xf6UCJgBz3+UUPASXwFnS0KiDLdA4n6IFezm1rRcA0uzipdfMFJO8rIMuDaCiFc+AQX0D2SgXk+OwvCpxX+Ph1WYHHe4dLQMC6FYX7XDXbWeE5UQjricBaeVlY8yof39oG6FzaE522gCyf8YMCJ2+YoQ3j2i9mY0bYE7O6J5SAfazlceHK1WobIff+cbvOCfx0sSf6lID7wpovcVwzZsxvLqQs7IlHSsB1sN7CysPstKAnlK+rgZH+dUfNG577vxQjYpsLmtJNuAKOgVVr4Dy7vZHgAFI9cSakHJuMtWRvwzWefBtGzUvs8KT2h+Wo8PcWs/ku6iBa5Xv9Q05spvTvWPl6wP+JH8wb/wUYAPpmk6ul/5RPAAAAAElFTkSuQmCC);
    }

  } // &.ng-invalid.ng-dirty

  &.ng-valid.ng-dirty {
    @include input-status-icon;
    border-color: lighten($green, 15);
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4MUU2MjhGOTE1OTIxMUUzOTc0Njk1NzlBNzE0NTRFNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4MUU2MjhGQTE1OTIxMUUzOTc0Njk1NzlBNzE0NTRFNSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgxRTYyOEY3MTU5MjExRTM5NzQ2OTU3OUE3MTQ1NEU1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgxRTYyOEY4MTU5MjExRTM5NzQ2OTU3OUE3MTQ1NEU1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+piXJAgAAAPNJREFUeNpi+v//PwMlmKXn3DIGEoE4EE8H4hwgfsZComYuID4IxOpArAfEDkwkaGYD4uNQzSCgDMRbiDWAEYiPQW1FBg0wA0B0N9SJ2MBRIDZGE7MD4g0sUNP3gvwDxNZAbIWmcD8QW6KJuQLxYZjN+6GaGaAK9yEp3IEkBwM+QLwHxgG5YB0Q2yMpcATi2UD8C4jd0TSHAPFWZAGQAZOA+AUQr0QST8ESDlFAvBZdEBaIq4A4Fk8sJAHxcmwSyNG4BIfNmUA8H5fJ6OlgLhBnI/ELgXgGvgSCLSlPA2IVIGYH4gkEUxgoR1ECmBgoBAABBgCndVSircXbLAAAAABJRU5ErkJggg==);
    color: lighten($green, 15);

    @include hidpi {
      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4MUU2MjhGRDE1OTIxMUUzOTc0Njk1NzlBNzE0NTRFNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4MUU2MjhGRTE1OTIxMUUzOTc0Njk1NzlBNzE0NTRFNSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgxRTYyOEZCMTU5MjExRTM5NzQ2OTU3OUE3MTQ1NEU1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgxRTYyOEZDMTU5MjExRTM5NzQ2OTU3OUE3MTQ1NEU1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+UqbbOgAAAX9JREFUeNpi/P//P8NAAiaGAQYD7gDG7rNL6WVXDxCzAHEBsiALnSwHWVoMZb8A4g56RgHI8n4kfjsQV9LLAaVolsNAGxDX0joKSoC4C498ExBL0SoEyoG4mwh1Qkw0CvYOItRNAeJwbA5ghGJyQCWBYIcBULrIxZUIe4F4DhmWV0MTFyEAMr8IVzkASjiFUPZTIK4j0vJaaKIiBEDpogxXUVyJlnBqoXmWEGgg0vJOdMuRHVCJI/gqCMQpKITqifR5BTYJUBRMBeIsAqmaAYvrq4C4kZxgRw8BDiKzVg+az1uJ0NeOz3JYCCQD8RMiEhyoMnkAxD+I9Hk7NJQYCDmAARqPf4hITJOJzBWg0KkhtUHSTKwmalmOrSBqJSbY8ACSPcGEI+5KyLC8noSCi2CbsBcp+xFreRM5QcZEoA1XRIQZNeRaTkyLqB+pbsBVErZSkmKJaQ9MAOI8HJY306tfAMr/+dS2nNQ24SQglgdidmpZDm79jPYNR7wDAAIMAN0XRvWiYSQcAAAAAElFTkSuQmCC);
    }

  } // &.ng-valid.ng-dirty

  @include placeholder {
    color: darken($color, 20);
    font-family: $typeface-sans;
    font-style: italic;
  }

  &:focus {
    border: none;
    @if $border != none {
      border: $border-width solid darken($border, 15);
    }
    outline: none;
    box-shadow: none;
    color: $color;

    &.thin {
      border-width: 1px;
    }

    &.error {
      border-color: lighten($red, 5);
      color: lighten($red, 5);
    }

    &.success {
      border-color: lighten($green, 5);
      color: lighten($green, 5);
    }

    @include placeholder {
      color: darken($color, 10);
    }

  } // &:focus

} // @mixin input
